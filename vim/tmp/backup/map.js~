function mapInit(){
$('#map_canvas').gmap().bind('init', function(event, map) { 
		$('#map_canvas').gmap('addMarker', {
			'position':map.center, 
			'draggable': true, 
			'bounds': false
		}, function(map, marker) {
		}).dragend( function(event) {
		})
});
}

function findLocation(location, marker) {
	$('#map_canvas').gmap('search', {'location': location}, function(results, status) {
		if ( status === 'OK' ) {
			$.each(results[0].address_components, function(i,v) {
				if ( v.types[0] == "administrative_area_level_1" || 
					 v.types[0] == "administrative_area_level_2" ) {
					$('#state'+marker.__gm_id).val(v.long_name);
				} else if ( v.types[0] == "country") {
					$('#country'+marker.__gm_id).val(v.long_name);
				}
			});
			marker.setTitle(results[0].formatted_address);
			$('#address'+marker.__gm_id).val(results[0].formatted_address);
			openDialog(marker);
		}
	});
}


